!function(t){"use strict";var i=function(){this.wrapper=t(".instrument-questions"),this.questions=t(".instrument-question"),this.isMobileOrTablet=t("body").hasClass("tablet"),this.isMobileOrTablet&&this.initLayout(),this.events()};i.prototype={initLayout:function(){this.questions.find(".body").show(),this.questions.find('[data-show-on="editing"]').show(),this.questions.find('[data-show-on="not-editing"]').hide()},events:function(){var i=this;this.isMobileOrTablet||this.wrapper.on("click",".instrument-question .header",function(){i.handleHeaderClick(this)}),this.wrapper.on("change","input,textarea",function(){i.validateQuestion(t(this).closest(".instrument-question"))}),this.wrapper.on("click",'[data-trigger="toggle-comment"]',function(){return i.toggleWell(t(this)),!1})},handleHeaderClick:function(i){"block"==t(i).closest(".instrument-question").find(".body").css("display")?this.toggleQuestions():this.toggleQuestions(t(i).closest(".instrument-question"))},toggleQuestions:function(i){var n=this;this.questions.each(function(i,e){n.hideQuestion(t(e))}),t(":animated").promise().done(function(){i&&n.showQuestion(i)})},showQuestion:function(i){this.startEditing(i),i.find(".body .well").hide(),i.find(".body").slideDown(),t("body").hasClass("tablet")||this.scrollTo(i)},startEditing:function(t){t.find('.header [data-show-on="not-editing"]').hide(),t.find('.header [data-show-on="editing"]').show()},toggleWell:function(t){var i=t.closest(".instrument-question").find(".well");"none"==i.css("display")?i.show():i.hide()},scrollTo:function(i){t("html,body").animate({scrollTop:i.offset().top},"slow")},hideQuestion:function(t){t.find('.header [data-show-on="not-editing"]').show(),t.find('.header [data-show-on="editing"]').hide(),t.find(".body").slideUp()},validateQuestion:function(t){var i=t.find("input[type=radio],input[type=checkbox]"),n=t.closest(".instrument-question").find(".question-status"),e=t.find("textarea");this.questionStatus(n,this.somethingWasChecked(i)||this.somethingWasFilledIn(e))},somethingWasChecked:function(t){return t.size()>0&&t.filter(":checked").size()>0},somethingWasFilledIn:function(t){return t.size()>0&&""!=t.val()},questionStatus:function(t,i){i?(t.find(".fa-question-circle").hide(),t.find(".fa-check").show()):(t.find(".fa-question-circle").show(),t.find(".fa-check").hide())}};var n=function(){this.buttons={next:t("[data-trigger='next-question']"),previous:t("[data-trigger='previous-question']")},this.questions=t(".instrument-questions .instrument-question"),this.current=1,this.events()};n.prototype={events:function(){var t=this;this.buttons.previous.on("click",function(){return t.previousQuestion(),!1}),this.buttons.next.on("click",function(){return t.nextQuestion(),!1})},nextQuestion:function(){var t=this.current+1;this.getElementByPosition(t)&&(t==this.questions.size()?this.buttons.next.hide():this.buttons.next.show(),this.buttons.previous.show(),this.hideQuestion(this.current)&&this.showQuestion(t)&&this.current++)},previousQuestion:function(){var t=this.current-1;this.getElementByPosition(t)&&(1==t?this.buttons.previous.hide():this.buttons.previous.show(),this.buttons.next.show(),this.hideQuestion(this.current)&&this.showQuestion(t)&&this.current--)},getElementByPosition:function(t){return this.questions[t-1]?this.questions[t-1]:!1},showQuestion:function(i){var n=this.getElementByPosition(i);return n?(t(n).show(),!0):n},hideQuestion:function(i){var n=this.getElementByPosition(i);return n?(t(n).hide(),!0):!1}},t(document).ready(function(){t(".instrument-header").on("click",function(){t(this).find("ul").slideToggle()}),t(".instrument-header").on("click","a",function(i){t("#next_panel").val(t(this).data("target-id")),t("#panel-form").submit(),i.preventDefault()});new i,new n})}(window.jQuery,window.app);