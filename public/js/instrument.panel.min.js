!function(t){"use strict";var i=function(){this.wrapper=t(".instrument-questions"),this.questions=t(".instrument-question"),this.isMobileOrTablet=t("body").hasClass("tablet"),this.isMobileOrTablet&&this.initLayout(),this.events()};i.prototype={initLayout:function(){this.questions.find(".body").show(),this.questions.find('[data-show-on="editing"]').show(),this.questions.find('[data-show-on="not-editing"]').hide()},events:function(){var i=this;this.isMobileOrTablet||this.wrapper.on("click",".instrument-question .header",function(){i.handleHeaderClick(this)}),this.wrapper.on("change","input,textarea",function(){i.validateQuestion(t(this).closest(".instrument-question"))}),this.wrapper.on("click",'[data-trigger="toggle-comment"]',function(){return i.toggleWell(t(this)),!1})},handleHeaderClick:function(i){"block"==t(i).closest(".instrument-question").find(".body").css("display")?this.toggleQuestions():this.toggleQuestions(t(i).closest(".instrument-question"))},toggleQuestions:function(i){var s=this;this.questions.each(function(i,n){s.hideQuestion(t(n))}),t(":animated").promise().done(function(){i&&s.showQuestion(i)})},showQuestion:function(i){this.startEditing(i),i.find(".body .well").hide(),i.find(".body").slideDown(),t("body").hasClass("tablet")||this.scrollTo(i)},startEditing:function(t){t.find('.header [data-show-on="not-editing"]').hide(),t.find('.header [data-show-on="editing"]').show()},toggleWell:function(t){var i=t.closest(".instrument-question").find(".well");"none"==i.css("display")?i.show():i.hide()},scrollTo:function(i){t("html,body").animate({scrollTop:i.offset().top},"slow")},hideQuestion:function(t){t.find('.header [data-show-on="not-editing"]').show(),t.find('.header [data-show-on="editing"]').hide(),t.find(".body").slideUp()},validateQuestion:function(t){var i=t.find("input[type=radio],input[type=checkbox]"),s=t.closest(".instrument-question").find(".question-status"),n=t.find("textarea");this.questionStatus(s,this.somethingWasChecked(i)||this.somethingWasFilledIn(n))},somethingWasChecked:function(t){return t.size()>0&&t.filter(":checked").size()>0},somethingWasFilledIn:function(t){return t.size()>0&&""!=t.val()},questionStatus:function(t,i){i?(t.find(".fa-question-circle").hide(),t.find(".fa-check").show()):(t.find(".fa-question-circle").show(),t.find(".fa-check").hide())}};var s=function(){this.buttons={next:t("[data-trigger='next-question']"),previous:t("[data-trigger='previous-question']")},this.questions=t(".instrument-questions .instrument-question"),this.listQuestions=t(".instrument-footer .question-list ul li"),this.trigger=t(".instrument-footer h4"),this.switcher=t(".instrument-questions .question-list ul"),this.title=t(".instrument-footer h4 .title"),this.current=1,this.events()};s.prototype={events:function(){var i=this;this.buttons.previous.on("click",function(){return i.previousQuestion(),!1}),this.buttons.next.on("click",function(){return i.nextQuestion(),!1}),this.trigger.on("click",function(t){i.showSwitcher(),t.stopPropagation()}),this.switcher.on("click","li",function(){i.goto(this)}),t("html").on("click",function(){i.hideSwitcher()})},showSwitcher:function(){this.switcher.show()},hideSwitcher:function(){this.switcher.hide()},"goto":function(i){var s=t(i).data("target-position");!isNaN(s)&&s>0&&s<=this.questions.size()&&(this.buttons.previous.toggle(1!=s),this.buttons.next.toggle(s!=this.questions.size()),this.showQuestion(s),this.hideQuestion(this.current),this.current=s)},nextQuestion:function(){var t=this.current+1;this.getQuestion(t)&&(t==this.questions.size()?this.buttons.next.hide():this.buttons.next.show(),this.buttons.previous.show(),this.hideQuestion(this.current)&&this.showQuestion(t)&&this.current++)},previousQuestion:function(){var t=this.current-1;this.getQuestion(t)&&(1==t?this.buttons.previous.hide():this.buttons.previous.show(),this.buttons.next.show(),this.hideQuestion(this.current)&&this.showQuestion(t)&&this.current--)},getQuestion:function(t){return this.questions[t-1]?this.questions[t-1]:!1},getListItem:function(t){return this.listQuestions[t-1]?this.listQuestions[t-1]:!1},showQuestion:function(i){var s=this.getQuestion(i),n=this.getListItem(i);return s&&(t(s).show(),n&&this.title.html(t(n).find("[data-title]").html())),s?!0:!1},hideQuestion:function(i){{var s=this.getQuestion(i);this.getListItem(i)}return s?(t(s).hide(),!0):!1}},t(document).ready(function(){t(".instrument-header").on("click",function(){t(this).find("ul").slideToggle()}),t(".instrument-header").on("click","a",function(i){t("#next_panel").val(t(this).data("target-id")),t("#panel-form").submit(),i.preventDefault()});new i,new s})}(window.jQuery,window.app);