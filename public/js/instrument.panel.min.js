!function(t){"use strict";function n(n){t(".instrument-question").each(function(n,i){o(t(i))}),t(":animated").promise().done(function(){n&&i(n)})}function i(n){n.find('.header [data-show-on="not-editing"]').hide(),n.find('.header [data-show-on="editing"]').show(),n.find(".body .well").hide(),n.find(".body").slideDown(),t("body").hasClass("tablet")||s(n)}function e(t){var n=t.closest(".instrument-question").find(".well");"none"==n.css("display")?n.show():n.hide()}function s(n){t("html,body").animate({scrollTop:n.offset().top},"slow")}function o(t){t.find('.header [data-show-on="not-editing"]').show(),t.find('.header [data-show-on="editing"]').hide(),t.find(".body").slideUp()}function u(t){var n=t.find("input[type=radio],input[type=checkbox]"),i=t.closest(".row").find(".question-status"),e=t.find("textarea");return n.size()>0?n.filter(":checked").size()>0||e.size()>0&&""!=e.val()?h(i):r(i):""==e.val()?r(i):h(i)}function r(t){return t.find(".fa-question-circle").show(),t.find(".fa-check").hide(),!1}function h(t){return t.find(".fa-question-circle").hide(),t.find(".fa-check").show(),!0}var c=function(){this.buttons={next:t("[data-trigger='next-question']"),previous:t("[data-trigger='previous-question']")},this.questions=t(".instrument-questions .instrument-question"),this.current=1,this.events()};c.prototype={events:function(){var t=this;this.buttons.previous.on("click",function(){return t.previousQuestion(),!1}),this.buttons.next.on("click",function(){return t.nextQuestion(),!1})},nextQuestion:function(){var t=this.current+1;this.getElementByPosition(t)&&(t==this.questions.size()?this.buttons.next.hide():this.buttons.next.show(),this.buttons.previous.show(),this.hideQuestion(this.current)&&this.showQuestion(t)&&this.current++)},previousQuestion:function(){var t=this.current-1;this.getElementByPosition(t)&&(1==t?this.buttons.previous.hide():this.buttons.previous.show(),this.buttons.next.show(),this.hideQuestion(this.current)&&this.showQuestion(t)&&this.current--)},getElementByPosition:function(t){return this.questions[t-1]?this.questions[t-1]:!1},showQuestion:function(n){var i=this.getElementByPosition(n);return i?(t(i).show(),!0):i},hideQuestion:function(n){var i=this.getElementByPosition(n);return i?(t(i).hide(),!0):!1}},t(document).ready(function(){t(".instrument-header").on("click",function(){t(this).find("ul").slideToggle()}),t(".instrument-questions").on("click",".instrument-question .header",function(){"block"==t(this).closest(".instrument-question").find(".body").css("display")?n():n(t(this).closest(".instrument-question"))}),t(".instrument-questions").on("change","input,textarea",function(){u(t(this).closest(".row").find(".instrument-question"))}),t(".instrument-questions").on("click",'[data-trigger="toggle-comment"]',function(){return e(t(this)),!1}),t(".instrument-header").on("click","a",function(n){t("#next_panel").val(t(this).data("target-id")),t("#panel-form").submit(),n.preventDefault()});new c})}(window.jQuery,window.app);