(function(a){a(document).ready(function(){var d=a("#organisation-creator"),e=a("#organisation"),c=d.find("[name=organisation_name]");e.on("change",function(){if(a(this).val()==="new"){d.modal("show")}});d.on("click",'[data-dismiss="modal"]',function(){e.val("")});d.on("submit","form",function(f){d.find(".btn-primary").trigger("click");f.preventDefault()});d.on("click",".btn-primary",function(){if(c.val()!==""){a.ajax({url:"/organisations",type:"POST",data:{name:c.val()},dataType:"json",success:function(f){d.find(".alert").html("");if(f.status==="oke"){d.find(".alert").addClass("hide");b(f.organisation);c.val("");d.modal("hide")}else{for(var g in f.errors.name){d.find(".alert").append(a("<span>",{text:f.errors.name[g]})).removeClass("hide")}}}})}});function b(f){e.find("option:last-child").before(a("<option>",{value:f.id,html:f.name,selected:true}))}})})(window.jQuery);